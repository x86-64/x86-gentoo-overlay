diff -ur a/configure.ac b/configure.ac
--- a/configure.ac	2012-03-09 17:05:45.447782109 +0400
+++ b/configure.ac	2012-03-09 17:40:30.326741694 +0400
@@ -107,6 +107,7 @@
 AM_GNU_GETTEXT([external],[need-ngettext])
 AM_GNU_GETTEXT_VERSION([0.17])
 
+AC_PROG_LIBTOOL
 AC_PROG_RANLIB
 
 AC_PROG_LEX
@@ -130,6 +131,8 @@
   fi
 fi
 
+CFLAGS="$CFLAGS -fPIC"
+
 dnl
 dnl Checks for basic compiler characteristics.
 dnl
@@ -527,6 +530,8 @@
 dnl Needed by src/Makefile.am
 AM_CONDITIONAL([IRI_IS_ENABLED], [test "X$iri" != "Xno"])
 
+headersdir=${includedir}/wgetlib/
+AC_SUBST(headersdir)
 
 dnl
 dnl Create output
diff -ur a/lib/Makefile.am b/lib/Makefile.am
--- a/lib/Makefile.am	2012-03-09 17:49:52.709730780 +0400
+++ b/lib/Makefile.am	2012-03-09 17:57:45.240721613 +0400
@@ -15,4 +15,7 @@
 ## You should have received a copy of the GNU General Public License
 ## along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
+headers_HEADERS = c-ctype.h error.h exitfail.h getopt_int.h getpass.h gettext.h intprops.h localcharset.h quotearg.h quote.h streq.h verify.h xalloc.h xalloc-oversized.h 
+
+
 include gnulib.mk
diff -ur a/src/Makefile.am b/src/Makefile.am
--- a/src/Makefile.am	2012-03-09 16:43:47.714807750 +0400
+++ b/src/Makefile.am	2012-03-09 17:45:08.568736310 +0400
@@ -41,8 +41,8 @@
 
 EXTRA_DIST = css.l css.c css_.c build_info.c.in
 
-bin_PROGRAMS = wget
-wget_SOURCES = cmpt.c connect.c convert.c cookies.c ftp.c    		  \
+lib_LTLIBRARIES = libwget.la
+libwget_la_SOURCES = cmpt.c connect.c convert.c cookies.c ftp.c    		  \
 	       css_.c css-url.c \
 	       ftp-basic.c ftp-ls.c hash.c host.c html-parse.c html-url.c \
 	       http.c init.c log.c main.c netrc.c progress.c ptimer.c     \
@@ -54,11 +54,14 @@
 	       options.h progress.h ptimer.h recur.h res.h retr.h         \
 	       spider.h ssl.h sysdep.h url.h utils.h wget.h iri.h 	  \
 	       exits.h gettext.h
-nodist_wget_SOURCES = version.c
-EXTRA_wget_SOURCES = iri.c
-LDADD = $(LIBOBJS) ../lib/libgnu.a
+nodist_libwget_la_SOURCES = version.c
+EXTRA_libwget_la_SOURCES = iri.c
+LDADD = $(LTLIBOBJS) ../lib/libgnu.a
+libwget_la_LDFLAGS = -I../lib/
+libwget_la_LIBADD = $(LDADD) 
 AM_CPPFLAGS = -I$(top_builddir)/lib -I$(top_srcdir)/lib
 
+headers_HEADERS = wgetlib.h config.h connect.h convert.h cookies.h css-tokens.h css-url.h exits.h ftp.h gettext.h hash.h host.h html-parse.h html-url.h http.h http-ntlm.h init.h iri.h log.h mswindows.h netrc.h options.h progress.h ptimer.h recur.h res.h retr.h spider.h ssl.h sysdep.h test.h url.h utils.h wget.h
 
 ../lib/libgnu.a:
 	cd ../lib && $(MAKE) $(AM_MAKEFLAGS)
@@ -70,7 +73,7 @@
 	if test -n "$(VPATH)"; then rm -f build_info.c.in; fi
 
 ESCAPEQUOTE = sed -e 's/[\\"]/\\&/g' -e 's/\\"/"/' -e 's/\\";$$/";/'
-version.c:  $(wget_SOURCES) ../lib/libgnu.a
+version.c:  $(libwget_la_SOURCES) ../lib/libgnu.a
 	echo '/* version.c */' > $@
 	echo '/* Autogenerated by Makefile - DO NOT EDIT */' >> $@
 	echo '' >> $@
@@ -78,7 +81,7 @@
 	echo 'const char *compilation_string = "'$(COMPILE)'";' \
 	    | $(ESCAPEQUOTE) >> $@
 	echo 'const char *link_string = "'$(CCLD) $(AM_CFLAGS) $(CFLAGS) \
-	$(AM_LDFLAGS) $(LDFLAGS) $(LIBS) $(wget_LDADD)'";' \
+	$(AM_LDFLAGS) $(LDFLAGS) $(LIBS) $(libwget_la_LDADD)'";' \
 	    | $(ESCAPEQUOTE) >> $@
 
 css.c: $(srcdir)/css.l
@@ -92,7 +95,7 @@
 	rm -f css.c css_.c
 
 check_LIBRARIES = libunittest.a
-libunittest_a_SOURCES = $(wget_SOURCES) test.c build_info.c test.h
+libunittest_a_SOURCES = $(libwget_la_SOURCES) test.c build_info.c test.h
 nodist_libunittest_a_SOURCES = version.c
 libunittest_a_CPPFLAGS = -DTESTING "-I$(top_builddir)/lib" "-I$(top_srcdir)/lib"
 libunittest_a_LIBADD = $(LIBOBJS)
